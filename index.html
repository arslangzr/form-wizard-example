<!doctype html>
<html lang="en">
   <head>
      <!-- Required meta tags -->
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <!-- Google fonts -->
      <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@400;500;600;700&display=swap" rel="stylesheet">
      <!-- Font Awsome -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      <!-- Bootstrap CSS -->
      <link rel="stylesheet" href="assets/css/bootstrap.min.css">
      <link rel="stylesheet" href="assets/css/style.css">
      <title>Form Wizard</title>
   </head>
   <body>
      <section class="form-wizard">
         <div class="container">
            <div class="row justify-content-center">
               <div class="col-md-8">
                  <div class="card">
                    <h4>SEE YOUR SIGN IN 3 SIMPLE STEPS</h4>
                  <div class="stepwizard">
                     <div class="stepwizard-row setup-panel">
                        <div class="stepwizard-step">
                            <h3>Step 1</h3>
                           <p>Upload your logo</p>
                           <a href="#step-1" type="button" class="btn btn-primary btn-circle"></a>
                          
                        </div>
                        <div class="stepwizard-step">
                               <h3>Step 2</h3>
                           <p>Choose your Location</p>
                           <a href="#step-2" type="button" class="btn btn-default btn-circle" disabled="disabled"></a>
                         
                        </div>
                        <div class="stepwizard-step">
                               <h3>Step 3</h3>
                           <p>Choose your style</p>
                           <a href="#step-3" type="button" class="btn btn-default btn-circle" disabled="disabled"></a>
                       
                        </div>
                     </div>
                  </div>
                  </div>
                  <form role="form">
                     <div class="row setup-content" id="step-1">
                        <div class="col-md-12 mt-5">
                  <form action="" method="POST" enctype="multipart/form-data">
                  <div class="row justify-content-center">
                  <div class="col-md-8">
                  <div class="form-group">
                  <div class="preview-zone hidden">
                  <div class="box box-solid">
                  <div class="box-header with-border">
              
                  </div>
                  <div class="box-body"></div>
                  </div>
                  </div>
                  <div class="dropzone-wrapper">
                  <div class="dropzone-desc">
                  <img src="assets/images/upload.png" alt="uploadLorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
                  tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                  quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
                  consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
                  cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
                  proident, sunt in culpa qui officia deserunt mollit anim id est laborum.">
                                    <h5>Drag & Drop Files Here  <br /> or</h5>
                  <a href="#" class="btn btn-outline-warning">Browse Files</a>
                  </div>
                  <input type="file" name="img_logo" class="dropzone">
                  </div>
                  </div>
                  </div>
                  </div>
                  <div class="row">
                  <!-- <div class="col-md-12 text-center mt-4">
                  <button type="button" class="btn btn-warning nextBtn">Upload</button>
                  </div> -->
                  </div>
                  </form>
                  <!-- <button class="btn btn-primary nextBtn btn-lg pull-right" type="button" >Next</button> -->
                  </div>
                  </div>
                  <div class="row setup-content" id="step-2">
                        <div class="col-md-12">
                           <div class="bg-image" style="background-image: url('assets/images/bg.png');"> 
                                <img class="img-1" src="https://dummyimage.com/100x32/fff/aaa" alt="bg">
                                <img class="img-2" src="https://dummyimage.com/100x32/fff/aaa" alt="bg">
                                <img class="img-3" src="https://dummyimage.com/100x32/fff/aaa" alt="bg">
                                <img class="img-4" src="https://dummyimage.com/100x32/fff/aaa" alt="bg">
                           </div>
                            
                           <button class="btn btn-warning nextBtn btn-lg pull-right" type="button" >Next</button>
                        </div>
                  </div>
                  <div class="row setup-content" id="step-3">
                        <div class="col-md-12 pt-4">

                           <div class="row">
                              <div class="col-md-6">
                                  <div class="form-check">
  <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option1" checked>
  <label class="form-check-label" for="exampleRadios1">
    Profile-Lit Sign
  </label>
</div>
<div class="form-check">
  <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2" value="option2">
  <label class="form-check-label" for="exampleRadios2">
    Un-Lit Profile Sign
  </label>
</div>
<div class="form-check">
  <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2" value="option2">
  <label class="form-check-label" for="exampleRadios2">
   Mesh Banner
  </label>
</div>
                              </div>

                              <div class="col-md-6">
                                 <ul class="light-mode">
                                    <li>
                                       <a href="#" class="active">DAY</a>
                                    </li>
                                    <li>
                                       <a href="#">NIGHT</a>
                                    </li>
                                 </ul>
                              </div>
                           </div>
                             
                           <canvas id="canvas_step3" class="step-3-bg-img"></canvas>
                           <!-- <div class="bg-image" style="background-image: url('assets/images/bg.png');"> 
                           </div> -->
                           <!-- <button class="btn btn-warning nextBtn btn-lg pull-right" type="button" >Next</button> -->
                      
                           <button id="request_demo_button" class="btn btn-warning btn-lg" type="submit">Request A Quote</button>
                        </div>
                  </div>
                  </form>
               </div>
            </div>
         </div>
      </section>
      <!-- jQuery first, then Popper.js, then Bootstrap JS -->
      <script src="assets/js/jquery-3.4.1.slim.min.js"></script>
      <script src="assets/js/popper.min.js"></script>
      <script src="assets/js/bootstrap.min.js"></script>
      <script> 
         $(document).ready(function () {
         
           var navListItems = $('div.setup-panel div a'),
                   allWells = $('.setup-content'),
                   allNextBtn = $('.nextBtn');
         
           allWells.hide();
         
           navListItems.click(function (e) {
               e.preventDefault();
               var $target = $($(this).attr('href')),
                       $item = $(this);
         
               if (!$item.hasClass('disabled')) {
                   navListItems.removeClass('btn-primary').addClass('btn-default');
                   $item.addClass('btn-primary');
                   allWells.hide();
                   $target.show();
                   $target.find('input:eq(0)').focus();
               }
           });
         
           allNextBtn.click(function(){
               var curStep = $(this).closest(".setup-content"),
                   curStepBtn = curStep.attr("id"),
                   nextStepWizard = $('div.setup-panel div a[href="#' + curStepBtn + '"]').parent().next().children("a"),
                   curInputs = curStep.find("input[type='text'],input[type='url']"),
                   isValid = true;
         
               $(".form-group").removeClass("has-error");
               for(var i=0; i<curInputs.length; i++){
                   if (!curInputs[i].validity.valid){
                       isValid = false;
                       $(curInputs[i]).closest(".form-group").addClass("has-error");
                   }
               }
         
               if (isValid)
                   nextStepWizard.removeAttr('disabled').trigger('click');
           });
         
           $('div.setup-panel div a.btn-primary').trigger('click');
         //   $(".stepwizard-step:eq(1) a.btn.btn-circle.btn-default").addClass("disabled");
         });
            
          
      </script>
      <script>
         let image_loaded;    //defining global variable to define loaded image from drag and drop
         let selected_option;
         let day_night_selection = "Day";
         let base64Image;
         let foreground1 = document.querySelector('.img-1');
         let foreground2 = document.querySelector('.img-2');    
         let foreground3 = document.querySelector('.img-3');    
         let foreground4 = document.querySelector('.img-4');
         // select all radio buttons with name="exampleRadios"
         let radios = document.getElementsByName('exampleRadios');

         // loop through all radio buttons
         for (let i = 0; i < radios.length; i++) {
         // check if radio button is checked
         if (radios[i].checked) {
            // get the value of the checked radio button
            let selectedValue = radios[i].value;
            selected_option = selectedValue;
            break;
         }
         }

         function readFile(input) {
            $(".stepwizard-step:eq(1) a.btn.btn-circle.btn-default").click();
            $(".stepwizard-step:eq(0) a.btn.btn-circle.btn-default").addClass("disabled");
            if (input.files && input.files[0]) {
               var reader = new FileReader();
               var foregroundSelector = $("#step-2 .bg-image>img");  //Foreground selector of all images in step 2

               reader.onload = function (e) {
                  image_loaded = e.target.result;
                  foreground1.src = e.target.result;
                  foreground2.src = e.target.result;    
                  foreground3.src = e.target.result;    
                  foreground4.src = e.target.result;
                  // console.log(foreground1,foreground2,foreground3,foreground4);
                  foregroundSelector.attr("src",e.target.result);
               };

               reader.readAsDataURL(input.files[0]);
            }
         }
         
         function reset(e) {
         e.wrap('<form>').closest('form').get(0).reset();
         e.unwrap();
         }
         
         $(".dropzone").change(function() {
         readFile(this);
         });
         
         $('.dropzone-wrapper').on('dragover', function(e) {
         e.preventDefault();
         e.stopPropagation();
         $(this).addClass('dragover');
         });
         
         $('.dropzone-wrapper').on('dragleave', function(e) {
         e.preventDefault();
         e.stopPropagation();
         $(this).removeClass('dragover');
         });
         
         $('.remove-preview').on('click', function() {
         var boxZone = $(this).parents('.preview-zone').find('.box-body');
         var previewZone = $(this).parents('.preview-zone');
         var dropzone = $(this).parents('.form-group').find('.dropzone');
         boxZone.empty();
         previewZone.addClass('hidden');
         reset(dropzone);
         });


         //Dark and light mode toggle class
         const elements = document.querySelectorAll('.light-mode li a');
            elements.forEach((element) => {
               element.addEventListener('click', () => {
                  // Remove "active" class from all elements
                  elements.forEach((other) => {
                     other.classList.remove('active');
                  });
                  // Add "active" class to the clicked element
                  element.classList.add('active');
               });
            });

         $(".light-mode li a").click(function(){
            if($(".light-mode li a:eq(0)").hasClass("active")){
               day_night_selection = "Day";
               // console.log("light mode triggered");
               $("body").css("background-color", "white");
            }
            else if($(".light-mode li a:eq(1)").hasClass("active")){
               day_night_selection = "Night";
               // console.log("dark mode triggered");
               $("body").css("background-color", "darkgray");
            }
         });    
         const canvas = document.getElementById('canvas_step3');
         canvas.width = 550;
         canvas.height = 550;
         const context = canvas.getContext('2d');

         const background = new Image();
         background.src = "assets/images/bg.png";
         background.onload = () => {
            context.drawImage(background, 0, 0, canvas.width, canvas.height);

            // update the src of the foreground images
            foreground1.src = image_loaded;
            foreground2.src = image_loaded;
            foreground3.src = image_loaded;
            foreground4.src = image_loaded;

            // redraw the canvas with the new images
            foreground1.onload = () => {
               context.drawImage(foreground1, 75, 157, 100, 32);
            };
            foreground2.onload = () => {
               context.drawImage(foreground2, 246, 157, 100, 32);
            };
            foreground3.onload = () => {
               context.drawImage(foreground3, canvas.width - 75 - foreground3.width, 157, 100, 32);
            };
            foreground4.onload = () => {
               const x = 162;
          const y = canvas.height - 250;
          const width = 32;
          const height = 100;
          const angle = 90 * Math.PI / 180;

          context.save();
          context.translate(x + height / 2, y + width / 2);
          context.rotate(angle);
          context.drawImage(foreground4, -height / 2, -width / 2, height, width);
          context.restore();

            };
         };

         $("#request_demo_button").click(function(){
            alert("Check console log");
            let canvas_image = document.getElementById('canvas_step3');
            const context = canvas.getContext('2d');
            const base64Image = canvas.toDataURL("image/png");

            console.log({
               name:"name",
               radiobutton: selected_option,
               daynight: day_night_selection,
               image:base64Image
            });
         });

         
      </script>
   </body>
</html>